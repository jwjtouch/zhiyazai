<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		{load href="/static/layui/css/layui.css" /}
		<style type="text/css">
			body{padding: 10px 30px;}
			.hide{display:none}
		</style>
	</head>
	<body>
		<button class="layui-btn add-category">添加顶级栏目</button>
		<button class="layui-btn layui-btn-primary up-all">全部收起</button>
		<button class="layui-btn layui-btn-primary down-all">全部展开</button>
		
		<div class="test-tree-table" lay-filter="test1"></div>
		{load href="/static/js/jquery-3.3.1.min.js" /}
		{load href="/static/layui/layui.js" /}
		<script type="text/javascript">
			layui.config({
				version: true,
        		debug: true,
				base: '/static/js/',
			})
			layui.use(['treetable','form'],function(){
				var data=[{"id":1,"pid":0,"title":"1-1"},{"id":2,"pid":0,"title":"1-2"},{"id":3,"pid":0,"title":"1-3"},{"id":4,"pid":1,"title":"1-1-1"},{"id":5,"pid":1,"title":"1-1-2"},{"id":6,"pid":2,"title":"1-2-1"},{"id":7,"pid":2,"title":"1-2-3"},{"id":8,"pid":3,"title":"1-3-1"},{"id":9,"pid":3,"title":"1-3-2"},{"id":10,"pid":4,"title":"1-1-1-1"},{"id":11,"pid":4,"title":"1-1-1-2"}];
				var o = layui.$,treetable = layui.treetable;
				treetable.render({
					elem: '.test-tree-table',
					data: data,
					field: 'title',
					cols: [
						{
							field: 'title',
							title: '栏目名称',
							width: '30%',
						},
						{
							field: 'id',
							title: 'ID',
							width: '10%',
						},
						{
							field: 'pid',
							title: '父ID',
							width: '20%',
						},
						{
							field: 'actions',
							title: '操作',
							width: '40%',
							data: [
								'<a lay-filter="add-cate" href="javascript:;">添加</a>','<a lay-filter="edit-cate" href="javascript:;">编辑</a>',
							],
						},
					]
				});
				
				
				treetable.on('treetable(add-cate)',function(data){
					console.dir(data);
				})
				
				treetable.on('treetable(edit-cate)',function(data){
					console.dir(data);
				})
				
				o('.up-all').click(function(){
					treetable.all('up');
				})
				
				o('.down-all').click(function(){
					treetable.all('down');
				})
			})

        //跳转到添加用户页面
        $(".add-category").on("click",function(){
            window.location.href = "{:url('category/add')}";
        })

		</script>
	</body>
</html>
